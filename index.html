<!DOCTYPE html>
<meta charset="utf-8">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
<style>

.links line {
  stroke: #999;
  stroke-opacity: 0.6;
}

.nodes circle {
  stroke: rgb(206, 102, 16)	;
  stroke-width: 1px;
  fill: black
}

svg {
  border:1px solid black;
}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<body>
<div class="container my-5">
  <h1 class="border-bottom pb-1 mb-5">
    Circle Packing
  </h1>
  
  <div class="row mb-3">

    <div class="col-12 col-md-6">
      <div class="input-group flex-nowrap">
        <span class="input-group-text" id="addon-wrapping">Höhe</span>
        <input id="heightInput" type="number" class="form-control" placeholder="" aria-label="Höhe" aria-describedby="addon-wrapping">
        <span class="input-group-text">mm</span>
      </div>
    </div>
  </div>

  <div class="row mb-4">

    <div class="col-12 col-md-6">
      <div class="input-group flex-nowrap">
        <span class="input-group-text" id="addon-wrapping">Länge</span>
        <input id="weightInput" type="number" class="form-control" placeholder="" aria-label="Username" aria-describedby="addon-wrapping">
        <span class="input-group-text">mm</span>
      </div>
    </div>

  </div>
  <div class="row mb-5">
    <div class="col-12">
      <button id="generateBtn" type="button" class="btn btn-outline-success px-4">Generieren</button>
    </div>   
  </div>
  
<svg width="800" height="200"></svg>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>

</body>
<script src="https://d3js.org/d3.v4.min.js"></script>

<script>
  $(document).ready(function(){
    $("#generateBtn").click(function(){
       
    });
  });

//create somewhere to put the force directed graph
var svg = d3.select("svg"),
          width = +svg.attr("width"),
          height = +svg.attr("height");
    
var radius = 15; 

var nodes_data =  [];
var numNodes = 100;
for(i = 0; i < numNodes; i++){
    nodes_data.push({"id": "Kreis"});
}

//Sample links data 
//type: A for Ally, E for Enemy

var nodes = d3.range(numNodes).map(function(d) {
  return {radius: 10}
})


var   simulation = d3.forceSimulation()
        .nodes(nodes_data)
        .force("collide", d3.forceCollide().radius(d => radius + 1).iterations(3))
        .force('charge', d3.forceManyBody().strength(1))
        //.force('center', d3.forceCenter(width/2, height / 2))
        .force('y', d3.forceY().y(function(d) {
        return height/2;
        }))
        .force('x', d3.forceX().x(function(d) {
        return 0;
        }));

//set up the simulation 
                    
//add tick instructions: 
simulation.on("tick", tickActions );  

//draw circles for the nodes 
var node = svg.append("g")
        .attr("class", "nodes") 
        .selectAll("circle")
        .data(nodes_data)
        .enter()
        .append("circle")
        .attr("r", radius);  

var drag_handler = d3.drag()
	.on("start", drag_start)
	.on("drag", drag_drag)
	.on("end", drag_end);	
	
drag_handler(node)




//drag handler
//d is the node 
function drag_start(d) {
 if (!d3.event.active) simulation.alphaTarget(0.3).restart();
    d.fx = d.x;
    d.fy = d.y;
}

function drag_drag(d) {
  d.fx = d3.event.x;
  d.fy = d3.event.y;
}


function drag_end(d) {
  if (!d3.event.active) simulation.alphaTarget(0);
  d.fx = null;
  d.fy = null;
}
    

function tickActions() {

    //constrains the nodes to be within a box
    
    node.y = 0;
    
    node
    .attr("cx", function(d) { return d.x = Math.max(radius, Math.min(width - radius, d.x)); })
    .attr("cy", function(d) { return d.y = Math.max(radius, Math.min(height - radius, d.y)); });
        
} 

</script>